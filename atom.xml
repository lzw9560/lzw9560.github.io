<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Victory&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-09-21T06:50:11.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Victory</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iTerm2使用sz/rz</title>
    <link href="http://yoursite.com/2017/09/21/Linux/Tool/szrc/"/>
    <id>http://yoursite.com/2017/09/21/Linux/Tool/szrc/</id>
    <published>2017-09-21T03:27:20.000Z</published>
    <updated>2017-09-21T06:50:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="sz-rz"><a href="#sz-rz" class="headerlink" title="sz/rz"></a>sz/rz</h3><a id="more"></a>
<blockquote>
<p>在Windows下SecureCRT 或者Xshell可以很方便的使用上传下载工具sz、rz，mac下我们一般使用scp来完成。<br>但是在某些场景下（登录服务器使用跳板机等）不能使用scp。</p>
</blockquote>
<h3 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h3><ul>
<li><p>上传<br>  <code>scp -r local_folder remote_username@remote_ip:remote_folder</code></p>
<p>  <code>scp -r local_folder remote_ip:remote_folder</code></p>
</li>
<li><p>下载<br>  <code>scp -r remote_username@remote_ip:remote_folder local_folder</code></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">几个可能用到的参数：</div><div class="line">-v 和大多数linux命令中的-v意思一样,用来显示进度。可以用来查看连接、认证、或是配置错误。</div><div class="line">-r 递归处理，将指定目录下的文档和子目录一并处理</div><div class="line">-C 使能压缩选项</div><div class="line">-P 选择端口。注意-p已经被rcp使用</div><div class="line">-4 强行使用IPV4地址</div><div class="line">-6 强行使用IPV6地址</div></pre></td></tr></table></figure>
<h3 id="mac下品日志使用rz、sz"><a href="#mac下品日志使用rz、sz" class="headerlink" title="mac下品日志使用rz、sz"></a>mac下品日志使用rz、sz</h3><ul>
<li>首先需要安装 iterm2</li>
<li>安装 lrzsz: <code>brew install lrzsz</code></li>
<li><p>下载iterm2-zmodem</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">cd /usr/local/bin</div><div class="line"></div><div class="line">sudo wget https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-send-zmodem.sh</div><div class="line"></div><div class="line">sudo wget https://raw.github.com/mmastrac/iterm2-zmodem/master/iterm2-recv-zmodem.sh</div><div class="line"></div><div class="line">sudo chmod 777 /usr/local/bin/iterm2-*</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>添加trigger</li>
</ul>
<pre><code>打开Item2，点击profiles，选择某个profile之后然后继续选择advanced → triggers，添加triggers。
</code></pre><h2 id="Regular-expression-Action-Action"><a href="#Regular-expression-Action-Action" class="headerlink" title="Regular | expression | Action    | Action"></a>Regular | expression | Action    | Action</h2><h2 id="B0100-Run-Silent-Coprocess-usr-local-bin-iterm2-send-zmodem-sh"><a href="#B0100-Run-Silent-Coprocess-usr-local-bin-iterm2-send-zmodem-sh" class="headerlink" title="**B0100 | Run Silent Coprocess | /usr/local/bin/iterm2-send-zmodem.sh"></a>**B0100 | Run Silent Coprocess | /usr/local/bin/iterm2-send-zmodem.sh</h2><p>**B00000000000000| Run Silent Coprocess | /usr/local/bin/iterm2-recv-zmodem.sh</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;sz-rz&quot;&gt;&lt;a href=&quot;#sz-rz&quot; class=&quot;headerlink&quot; title=&quot;sz/rz&quot;&gt;&lt;/a&gt;sz/rz&lt;/h3&gt;
    
    </summary>
    
      <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
      <category term="Linux/sz、rz" scheme="http://yoursite.com/tags/Linux-sz%E3%80%81rz/"/>
    
  </entry>
  
  <entry>
    <title>Supervisor 安装配置</title>
    <link href="http://yoursite.com/2017/09/12/tool/supervisor/"/>
    <id>http://yoursite.com/2017/09/12/tool/supervisor/</id>
    <published>2017-09-12T09:00:46.000Z</published>
    <updated>2017-09-12T09:15:04.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Supervisor"><a href="#Supervisor" class="headerlink" title="Supervisor"></a>Supervisor</h4><a id="more"></a>
<h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p>-<br>在 web 应用部署到线上后，需要保证应用一直处于运行状态，在遇到程序异常、报错等情况，导致 web 应用终止时，需要保证程序可以立刻重启，继续提供服务。</p>
<p>所以，就需要一个工具，时刻监控 web 应用的运行情况，管理该进程。</p>
<p>Supervisor 就是解决这种需求的工具，可以保证程序崩溃后，重新把程序启动起来等功能。</p>
<p>Supervisor 是一个用 Python 写的进程管理工具，可以很方便的用来在 UNIX-like 系统（不支持 Windows）下启动、重启（自动重启程序）、关闭进程（不仅仅是 Python 进程）。</p>
<h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>-</p>
<ol>
<li>Ubuntu系统下：apt-get install supervisor，通过这种方式安装后，自动设置为开机启动</li>
<li>也可以通过 pip install supervisor 进行安装，但是需要手动启动，然后设置为开机启动（不推荐这种安装方式）</li>
</ol>
<p>参考：</p>
<ul>
<li><p><a href="http://liyangliang.me/posts/2015/06/using-supervisor/" target="_blank" rel="external">http://liyangliang.me/posts/2015/06/using-supervisor/</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/xueweihan/p/6195824.html" target="_blank" rel="external">http://www.cnblogs.com/xueweihan/p/6195824.html</a></p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Supervisor&quot;&gt;&lt;a href=&quot;#Supervisor&quot; class=&quot;headerlink&quot; title=&quot;Supervisor&quot;&gt;&lt;/a&gt;Supervisor&lt;/h4&gt;
    
    </summary>
    
      <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
      <category term="Supervisor" scheme="http://yoursite.com/tags/Supervisor/"/>
    
  </entry>
  
  <entry>
    <title>GitLab-Runner</title>
    <link href="http://yoursite.com/2017/09/12/gitlabci/gitlab_runner/"/>
    <id>http://yoursite.com/2017/09/12/gitlabci/gitlab_runner/</id>
    <published>2017-09-12T07:12:03.000Z</published>
    <updated>2017-09-12T08:53:30.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="GitLab-Runner"><a href="#GitLab-Runner" class="headerlink" title="GitLab-Runner"></a>GitLab-Runner</h4><a id="more"></a>
<blockquote>
<p>GitLab-Runner是配合GitLab-CI进行使用的。一般的，GitLab里面的每一个工程都会定义一个属于这个工程的软件集成脚本，用来自动化地完成一些软件集成工作。当这个工程的仓库代码发生变动时，比如有人push了代码，GitLab就会将这个变动通知GitLab-CI。这时GitLab-CI会找出与这个工程相关联的Runner，并通知这些Runner把代码更新到本地并执行预定义好的执行脚本。</p>
<p>Runner可以分布在不同的主机上，同一个主机上也可以有多个Runner</p>
</blockquote>
<h5 id="Runner类型"><a href="#Runner类型" class="headerlink" title="Runner类型"></a>Runner类型</h5><p><strong>Shared Runner（共享型）</strong></p>
<blockquote>
<p>这种Runner是所有工程都能够用的。只有系统管理员能够创建Shared Runner。<br><strong>Specific Runner（指定型）</strong><br>这种Runner只能为指定的工程服务。拥有该工程访问权限的人都能为该工程创建Shared Runner。</p>
</blockquote>
<h5 id="创建-Runner"><a href="#创建-Runner" class="headerlink" title="创建 Runner"></a>创建 Runner</h5><blockquote>
<p>Linux 服务器安装 gitlab-CI-multi-runner <a href="https://gitlab.com/gitlab-org/gitlab-ci-multi-runner" target="_blank" rel="external">官方文档</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># For Debian/Ubuntu</div><div class="line">$ curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.deb.sh | sudo bash</div><div class="line">$ sudo apt-get install gitlab-ci-multi-runner</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># For CentOS</div><div class="line">$ curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-ci-multi-runner/script.rpm.sh | sudo bash</div><div class="line">$ sudo yum install gitlab-ci-multi-runner</div></pre></td></tr></table></figure>
<h5 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h5><blockquote>
<p>安装好 GitLab Runner 之后，我们只要启动 Runner 然后和 CI 绑定就可以了：</p>
</blockquote>
<ul>
<li>打开你 GitLab 中的项目页面，在项目设置中找到 runners</li>
<li>运行 sudo gitlab-ci-multi-runner register</li>
<li>输入 CI URL</li>
<li>输入 Token</li>
<li>输入 Runner 的名字</li>
<li>选择 Runner 的类型，简单起见还是选 Shell 吧</li>
<li>完成</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="http://zhaozhiming.github.io/blog/2015/11/30/gitlab-ci-runner-create-and-config/" target="_blank" rel="external">http://zhaozhiming.github.io/blog/2015/11/30/gitlab-ci-runner-create-and-config/</a></li>
<li><a href="http://www.tuicool.com/articles/jEBf6jb" target="_blank" rel="external">http://www.tuicool.com/articles/jEBf6jb</a></li>
<li><a href="https://scarletsky.github.io/2016/07/29/use-gitlab-ci-for-continuous-integration/" target="_blank" rel="external">https://scarletsky.github.io/2016/07/29/use-gitlab-ci-for-continuous-integration/</a></li>
<li><a href="https://www.oschina.net/question/12_219138" target="_blank" rel="external">https://www.oschina.net/question/12_219138</a></li>
<li><a href="http://5404542.blog.51cto.com/5394542/1851887" target="_blank" rel="external">http://5404542.blog.51cto.com/5394542/1851887</a></li>
<li><a href="https://segmentfault.com/a/1190000007180257" target="_blank" rel="external">https://segmentfault.com/a/1190000007180257</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;GitLab-Runner&quot;&gt;&lt;a href=&quot;#GitLab-Runner&quot; class=&quot;headerlink&quot; title=&quot;GitLab-Runner&quot;&gt;&lt;/a&gt;GitLab-Runner&lt;/h4&gt;
    
    </summary>
    
      <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
      <category term="GitLab-CI" scheme="http://yoursite.com/tags/GitLab-CI/"/>
    
  </entry>
  
  <entry>
    <title>GitLab-CI 一些概念</title>
    <link href="http://yoursite.com/2017/09/12/gitlabci/gitlabci/"/>
    <id>http://yoursite.com/2017/09/12/gitlabci/gitlabci/</id>
    <published>2017-09-12T06:58:16.000Z</published>
    <updated>2017-09-12T07:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<h5 id="GitLab-CI"><a href="#GitLab-CI" class="headerlink" title="GitLab-CI"></a>GitLab-CI</h5><a id="more"></a>
<h6 id="Continuous-Integration-持续集成"><a href="#Continuous-Integration-持续集成" class="headerlink" title="Continuous Integration(持续集成)"></a>Continuous Integration(持续集成)</h6><blockquote>
<p>持续集成是一种软件开发实践，即团队开发成员经常集成他们的工作，通常每个成员至少集成一次，也就意味着每天可能会发生多次集成。每次集成都通过自动化的构建（包括编译，发布，自动化测试）来验证，从而尽快的发现集成错误。许多团队发现这个过程可以大大减少集成的问题，让团队能都更快的开发内聚的软件。</p>
<p>软件集成： 代码合并–&gt; 安装依赖–&gt; 编译–&gt; 测试 –&gt;发布。</p>
</blockquote>
<h6 id="GitLab-CI-1"><a href="#GitLab-CI-1" class="headerlink" title="GitLab-CI"></a>GitLab-CI</h6><blockquote>
<p>GitLab-CI 就是一套配合GitLab使用的持续集成系统（Jenkins也可以配合GitLab使用）。</p>
</blockquote>
<h6 id="Pipeline"><a href="#Pipeline" class="headerlink" title="Pipeline"></a>Pipeline</h6><blockquote>
<p>一次 Pipeline 其实相当于一次构建任务，里面可以包含多个流程，如安装依赖、运行测试、编译、部署测试服务器、部署生产服务器等流程。<br>任何提交或者 Merge Request 的合并都可以触发 Pipeline，如下图所示：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+------------------+           +----------------+</div><div class="line">|                  |  trigger  |                |</div><div class="line">|   Commit / MR    +----------&gt;+    Pipeline    |</div><div class="line">|                  |           |                |</div><div class="line">+------------------+           +----------------+</div></pre></td></tr></table></figure>
<h6 id="Stages"><a href="#Stages" class="headerlink" title="Stages"></a>Stages</h6><p>Stages 表示构建阶段，说白了就是上面提到的流程。<br>我们可以在一次 Pipeline 中定义多个 Stages，这些 Stages 会有以下特点：</p>
<p>所有 Stages 会按照顺序运行，即当一个 Stage 完成后，下一个 Stage 才会开始<br>只有当所有 Stages 完成后，该构建任务 (Pipeline) 才会成功<br>如果任何一个 Stage 失败，那么后面的 Stages 不会执行，该构建任务 (Pipeline) 失败<br>因此，Stages 和 Pipeline 的关系就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">+--------------------------------------------------------+</div><div class="line">|                                                        |</div><div class="line">|  Pipeline                                              |</div><div class="line">|                                                        |</div><div class="line">|  +-----------+     +------------+      +------------+  |</div><div class="line">|  |  Stage 1  |----&gt;|   Stage 2  |-----&gt;|   Stage 3  |  |</div><div class="line">|  +-----------+     +------------+      +------------+  |</div><div class="line">|                                                        |</div><div class="line">+--------------------------------------------------------+</div></pre></td></tr></table></figure>
<h6 id="Jobs"><a href="#Jobs" class="headerlink" title="Jobs"></a>Jobs</h6><p>Jobs 表示构建工作，表示某个 Stage 里面执行的工作。<br>我们可以在 Stages 里面定义多个 Jobs，这些 Jobs 会有以下特点：</p>
<p>相同 Stage 中的 Jobs 会并行执行<br>相同 Stage 中的 Jobs 都执行成功时，该 Stage 才会成功<br>如果任何一个 Job 失败，那么该 Stage 失败，即该构建任务 (Pipeline) 失败<br>所以，Jobs 和 Stage 的关系图就是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">+------------------------------------------+</div><div class="line">|                                          |</div><div class="line">|  Stage 1                                 |</div><div class="line">|                                          |</div><div class="line">|  +---------+  +---------+  +---------+   |</div><div class="line">|  |  Job 1  |  |  Job 2  |  |  Job 3  |   |</div><div class="line">|  +---------+  +---------+  +---------+   |</div><div class="line">|                                          |</div><div class="line">+------------------------------------------+</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;GitLab-CI&quot;&gt;&lt;a href=&quot;#GitLab-CI&quot; class=&quot;headerlink&quot; title=&quot;GitLab-CI&quot;&gt;&lt;/a&gt;GitLab-CI&lt;/h5&gt;
    
    </summary>
    
      <category term="tool" scheme="http://yoursite.com/categories/tool/"/>
    
    
      <category term="GitLab-CI" scheme="http://yoursite.com/tags/GitLab-CI/"/>
    
  </entry>
  
  <entry>
    <title>Elasticsearch</title>
    <link href="http://yoursite.com/2017/08/17/Elasticsearch-%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2017/08/17/Elasticsearch-笔记/</id>
    <published>2017-08-17T07:05:42.000Z</published>
    <updated>2017-08-18T08:10:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>Elasticsearch指南<br><a id="more"></a></p>
<p>文档地址：<br><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html#getting-started" target="_blank" rel="external">英文官方文档</a>  </p>
<p><a href="https://www.gitbook.com/book/looly/elasticsearch-the-definitive-guide-cn/details" target="_blank" rel="external">Elasticsearch权威指南（中文版）</a></p>
<p><a href="http://www.jianshu.com/p/f9adeded30b8" target="_blank" rel="external">Elasticsearch 5.4.0 用户指南</a></p>
<p><a href="http://www.jianshu.com/p/f3a1982bf302" target="_blank" rel="external">全文检索基础</a></p>
<p><a href="http://blog.csdn.net/jiuqiyuliang/article/details/51245335" target="_blank" rel="external">安装</a></p>
<p><a href="http://www.jianshu.com/p/068ee911c001" target="_blank" rel="external">ik中文分词</a><br><a href="http://www.cnblogs.com/xing901022/p/5910139.html" target="_blank" rel="external">拼音分词</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Elasticsearch指南&lt;br&gt;
    
    </summary>
    
      <category term="程序" scheme="http://yoursite.com/categories/programming/"/>
    
    
      <category term="Elasticsearch" scheme="http://yoursite.com/tags/Elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 常用命令</title>
    <link href="http://yoursite.com/2017/08/17/Hexo/index/"/>
    <id>http://yoursite.com/2017/08/17/Hexo/index/</id>
    <published>2017-08-17T07:05:42.000Z</published>
    <updated>2017-09-12T06:52:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo</p>
<a id="more"></a>
<p>安装 Hexo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g hexo</div></pre></td></tr></table></figure></p>
<p>查看 Node 版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node -v</div></pre></td></tr></table></figure></p>
<p>查看 Hexo 版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo version</div></pre></td></tr></table></figure></p>
<p>创建项目<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo init hexo-lcx</div></pre></td></tr></table></figure></p>
<p>进入目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd hexo-lcx</div></pre></td></tr></table></figure></p>
<p>也可以先进目录再初始化项目<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd hexo-lcx</div><div class="line">hexo init</div></pre></td></tr></table></figure></p>
<p>安装依赖包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install</div></pre></td></tr></table></figure></p>
<p>以后所有的命令都在该目录下进行</p>
<p>启动服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo server</div></pre></td></tr></table></figure></p>
<p>用浏览器打开<a href="http://localhost:4000/或者http://127.0.0.1:4000/就能看到网页了" target="_blank" rel="external">http://localhost:4000/或者http://127.0.0.1:4000/就能看到网页了</a><br>推荐使用现代化浏览器(Chrome)获得最佳效果</p>
<p>按Ctrl+C停止本地预览服务</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexo&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="http://yoursite.com/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2017/08/17/Hello-World/"/>
    <id>http://yoursite.com/2017/08/17/Hello-World/</id>
    <published>2017-08-17T03:54:15.000Z</published>
    <updated>2017-08-17T03:54:15.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2017/08/15/index/"/>
    <id>http://yoursite.com/2017/08/15/index/</id>
    <published>2017-08-15T11:12:36.000Z</published>
    <updated>2017-08-15T11:12:36.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
</feed>
